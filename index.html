<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Hamilton – Intelligent Debate Speech Generator</title>

<script src="https://cdn.tailwindcss.com"></script>

<style>
[contenteditable]:empty:before {
    content: attr(data-placeholder);
    color: #94a3b8;
    font-style: italic;
}
mark { background: yellow; color: black; }
.generated-case strong { color: #fbbf24; }
</style>
</head>

<body class="min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 p-6">
<div class="max-w-6xl mx-auto">

<header class="text-center mb-8">
<h1 class="text-5xl font-bold text-amber-400">Hamilton</h1>
<p class="text-slate-300">Intelligent Debate Speech Generator</p>
</header>

<div class="flex gap-4 mb-6 justify-center">
<button id="counterTab" class="px-6 py-3 rounded bg-amber-500 font-semibold text-slate-900">Counter-Speech</button>
<button id="caseTab" class="px-6 py-3 rounded bg-slate-800 text-slate-300">Write a Case</button>
</div>

<!-- COUNTER SPEECH -->
<div id="counterSection">
<div class="grid md:grid-cols-2 gap-6">

<div class="bg-slate-800/50 p-6 rounded border border-slate-700">
<h2 class="text-xl font-semibold text-amber-400 mb-3">Case Input</h2>

<div id="caseInput" contenteditable
class="bg-slate-900 h-64 p-4 rounded border border-slate-600 text-slate-100 overflow-y-auto"
data-placeholder="Paste formatted case here..."></div>

<label class="block text-slate-300 mt-4">
Speech Length: <span id="speechLengthDisplay">3</span> min
</label>
<input id="speechLength" type="range" min="1" max="8" value="3" class="w-full">

<button id="generateCounterBtn"
class="w-full mt-4 bg-amber-500 hover:bg-amber-600 text-slate-900 font-semibold py-2 rounded">
Generate Counter-Speech
</button>
</div>

<div class="bg-slate-800/50 p-6 rounded border border-slate-700">
<h2 class="text-xl font-semibold text-amber-400 mb-3">Output</h2>
<div class="bg-slate-900 p-4 h-96 rounded overflow-y-auto border border-slate-600">
<p id="counterOutput" class="text-slate-400 italic">Waiting for generation…</p>
</div>
</div>

</div>
</div>

<!-- CASE WRITER -->
<div id="caseSection" class="hidden">
<div class="grid md:grid-cols-2 gap-6">

<div class="bg-slate-800/50 p-6 rounded border border-slate-700">
<input id="topic" class="w-full p-2 bg-slate-900 border border-slate-600 rounded text-slate-100"
placeholder="Resolution / Topic">

<div class="flex gap-2 mt-3">
<button id="affBtn" class="flex-1 bg-amber-500 py-2 rounded">Aff</button>
<button id="negBtn" class="flex-1 bg-slate-700 py-2 rounded text-slate-300">Neg</button>
</div>

<input id="focusPoint1" class="w-full mt-3 p-2 bg-slate-900 border border-slate-600 rounded"
placeholder="Focus Point 1">

<input id="focusPoint2" class="w-full mt-3 p-2 bg-slate-900 border border-slate-600 rounded"
placeholder="Focus Point 2 (optional)">

<button id="generateCaseBtn"
class="w-full mt-4 bg-amber-500 py-2 rounded font-semibold text-slate-900">
Generate Case
</button>
</div>

<div class="bg-slate-800/50 p-6 rounded border border-slate-700">
<h2 class="text-xl font-semibold text-amber-400 mb-3">Generated Case</h2>
<div class="bg-slate-900 p-4 h-96 rounded overflow-y-auto border border-slate-600">
<div id="caseOutput" class="text-slate-300 italic generated-case">
Waiting for generation…
</div>
</div>
</div>

</div>
</div>

</div>

<script>
/* =========================================================
   CONFIG — PUTER AI (DEV ONLY)
   ========================================================= */
const PUTER_API_KEY = "PASTE_YOUR_PUTER_API_KEY_HERE";
const PUTER_ENDPOINT = "https://api.puter.com/v1/chat/completions";
const MODEL = "gpt-4.1-mini";

/* =========================================================
   CENTRALIZED AI CALL
   ========================================================= */
async function callAI(system, user, maxTokens = 1200) {
    const res = await fetch(PUTER_ENDPOINT, {
        method: "POST",
        headers: {
            "Authorization": "Bearer " + PUTER_API_KEY,
            "Content-Type": "application/json"
        },
        body: JSON.stringify({
            model: MODEL,
            messages: [
                { role: "system", content: system },
                { role: "user", content: user }
            ],
            temperature: 0.7,
            max_tokens: maxTokens
        })
    });

    if (!res.ok) throw new Error("AI request failed");
    const data = await res.json();
    return data.choices[0].message.content;
}

/* =========================================================
   TAB LOGIC
   ========================================================= */
counterTab.onclick = () => {
    counterSection.classList.remove("hidden");
    caseSection.classList.add("hidden");
};
caseTab.onclick = () => {
    caseSection.classList.remove("hidden");
    counterSection.classList.add("hidden");
};

/* =========================================================
   COUNTER SPEECH
   ========================================================= */
speechLength.oninput = e => speechLengthDisplay.textContent = e.target.value;

generateCounterBtn.onclick = async () => {
    counterOutput.textContent = "Generating…";

    const prompt = `
Generate a ${speechLength.value}-minute rebuttal speech
against the following case:

${caseInput.innerText}

Be analytical, structured, and persuasive.
`;

    try {
        const text = await callAI(
            "You are a high-level debate coach.",
            prompt,
            speechLength.value * 180
        );
        counterOutput.innerText = text;
    } catch (e) {
        counterOutput.innerText = e.message;
    }
};

/* =========================================================
   CASE GENERATOR
   ========================================================= */
let side = "Aff";
affBtn.onclick = () => side = "Aff";
negBtn.onclick = () => side = "Neg";

generateCaseBtn.onclick = async () => {
    caseOutput.innerText = "Generating…";

    const prompt = `
Write a complete ${side} debate case on:
"${topic.value}"

Focus points:
${focusPoint1.value}
${focusPoint2.value || ""}

Use HTML formatting:
- <strong> for tags and citations
- <mark> for key warrants and impacts
`;

    try {
        const text = await callAI(
            "You are an expert debate case writer.",
            prompt,
            2000
        );
        caseOutput.innerHTML = text;
    } catch (e) {
        caseOutput.innerText = e.message;
    }
};
</script>
</body>
</html>
